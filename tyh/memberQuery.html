<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>会员查看</title>
		<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/index.css" />
		<script type="text/javascript" src="../js/jquery-1.12.4.js"></script>
		<script type="text/javascript" src="../js/jq_ajax_config.js"></script>
		<script type="text/javascript" src="../js/vue.js"></script>
		<style>
			[v-cloak] {
				display: none;
			}
		</style>
	</head>

	<body>
		<div class="container">
			<div id="memberQueryApp" class="row" v-cloak>
				<h3>会员操作</h3>
				<hr />
				<div>
					<el-form :inline="true" :model="member" class="demo-form-inline" label-width="80px">
						<el-form-item label="会员名称">
							<el-input v-model="member.name"></el-input>
						</el-form-item>
						<el-form-item>
							<el-button type="success" @click="onQuery()">查询</el-button>
							<el-button type="primary" @click="onAdd()">新会员</el-button>
						</el-form-item>
					</el-form>
				</div>
				<div>
					<template>
						<el-table :data="pageInfo.list" stripe style="width: 100%">
							<el-table-column prop="memberid" label="会员编号">
							</el-table-column>
							<el-table-column prop="membername" label="会员姓名">
							</el-table-column>
							<el-table-column prop="countintegrate" label="会员积分">
							</el-table-column>
							<el-table-column prop="memberintegrate" label="会员剩余积分">
							</el-table-column>
						</el-table>
					</template>
				</div>
				<!--<div style="margin-left: 40%;">
					<el-button @click="fristPage" type="primary">首页</el-button>
					<el-button v-if="pageInfo.hasPreviousPage" @click="prePage" type="primary">上一页</el-button>
					第<span>{{pageInfo.pageNum}}</span>页 共<span>{{pageInfo.pages}}</span>页 （总数<span>{{pageInfo.total}}</span>）
					<el-button v-if="pageInfo.hasNextPage" @click="nextPage" type="primary">下一页</el-button>
					<el-button @click="lastPage" type="primary">尾页</el-button>
				</div>-->
				<div class="block">
					<el-pagination @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="currentPage4" :page-sizes="[100, 200, 300, 400]" :page-size="100" layout="total, sizes, prev, pager, next, jumper" :total="400">
					</el-pagination>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/dialogs.js"></script>
	<script type="text/javascript" src="../js/index.js"></script>
	<script>
		var memberQueryApp = new Vue({
			data: {
				currentPage1: 5,
				currentPage2: 5,
				currentPage3: 5,
				currentPage4: 4,
				member: {
					name: ''
				},
				m: {
					memberid: '',
					gradeid: '',
					membername: '',
					memberpwd: '',
					memberintegrate: '',
					countintegrate: '',
					money: '',
					countmoney: '',
					starttime: ''
				},
				pageInfo: {}
			},
			methods: {
				onAdd() {
					location.href = "memberAdd.html";
				},
				handleSizeChange(val) {
					console.log(`每页 ${val} 条`);
				},
				handleCurrentChange(val) {
					console.log(`当前页: ${val}`);
				},
				goToQueryMember(pageNum, pageSize) {
					let _this = this;
					$.getJSON(`http://127.0.0.1:8080/tyh/api/m/${pageNum}/${pageSize}`, function(m) {
						console.info(m);
						_this.pageInfo = m;
					});
				}
			},
			mounted() {
				this.goToQueryMember(1, 1);
			}
		}).$mount('#memberQueryApp');
	</script>

</html>