<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>维修单据</title>
		<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/index.css" />
		<script type="text/javascript" src="../js/jquery-1.12.4.js"></script>
		<script type="text/javascript" src="../js/jq_ajax_config.js"></script>
		<script type="text/javascript" src="../js/vue.js"></script>
		<style>
			[v-cloak] {
				display: none;
			}
		</style>
	</head>
	<!--label-width="100px"-->
	<!--label-width="339px"-->

	<body>
		<div class="container">
			<div id="receiptsApp" class="row" v-cloak>
				<div>
					<h3>单号：<span v-text="smid"></span></h3>
					<!--<el-button style="margin-left: 55%;" type="success" @click="">委托单</el-button>
					<el-button type="success" @click="">结算单</el-button>
					<el-button type="success" @click="">照片</el-button>
					<el-button type="success" @click="">附单</el-button>-->
				</div>
				<hr style="width: 100%;" />
				<div>
					<el-form :inline="true" :model="xq" class="demo-form-inline">
						<el-form-item label="车牌号码">
							<!--去除边框  style="outline:none;"-->
							<el-input v-model="xq.carnumber"></el-input>
						</el-form-item>
						<!--<el-form-item label="车架号">
							<el-input v-model="auction.auctionName"></el-input>
						</el-form-item>-->
						<el-form-item label="车辆型号">
							<el-input v-model="xq.motorcyclename"></el-input>
						</el-form-item>
						<el-form-item label="车辆品牌">
							<el-input v-model="xq.brandname"></el-input>
						</el-form-item>
						<el-form-item label="发动机号">
							<el-input v-model="xq.motorid"></el-input>
						</el-form-item>
						<el-form-item label="发动机品牌">
							<el-input v-model="xq.motorname"></el-input>
						</el-form-item>
						<el-form-item label="服务顾问">
							<el-input v-model="xq.staffname"></el-input>
						</el-form-item>
						<el-form-item label="车主姓名">
							<el-input v-model="xq.username"></el-input>
						</el-form-item>
						<el-form-item label="驾驶员">
							<el-input v-model="xq.drivername"></el-input>
						</el-form-item>
						<el-form-item label="联系电话">
							<el-input v-model="xq.driverphone"></el-input>
						</el-form-item>
						<el-form-item label="进厂里程">
							<el-input v-model="xq.carcourse"></el-input>
						</el-form-item>
						<!--<el-form-item label="进场油量">
							<el-input v-model="auction.auctionName"></el-input>
						</el-form-item>
						<el-form-item label="上次历程">
							<el-input v-model="auction.auctionName"></el-input>
						</el-form-item>-->
						<el-form-item label="进场时间">
							<el-input v-model="xq.starttime"></el-input>
						</el-form-item>
						<!--<el-form-item label="业务类型">
							<el-select v-model="auction.auctionName" placeholder="请选择业务类型">
								<el-option label="区域一" value="shanghai"></el-option>
								<el-option label="区域二" value="beijing"></el-option>
							</el-select>
						</el-form-item>
						<el-form-item label="施工班次">
							<el-select v-model="auction.auctionName" placeholder="请选择单据类型">
								<el-option label="白天" value="shanghai"></el-option>
								<el-option label="中午" value="beijing"></el-option>
								<el-option label="晚上" value="beijing"></el-option>
							</el-select>
						</el-form-item>-->
						<!--<el-form-item label="接车人">
							<el-input v-model="xq.auctionName"></el-input>
						</el-form-item>-->
						<!--<el-form-item label="预计完工">
							<el-date-picker type="date" size="small" v-model="auction.auctionStartTime" style="width: 100%;"></el-date-picker>
						</el-form-item>
						<el-form-item label="结算方式">
							<el-select v-model="auction.auctionName" placeholder="请选择单据类型">
								<el-option label="现结" value="shanghai"></el-option>
								<el-option label="微信" value="beijing"></el-option>
								<el-option label="支付宝" value="beijing"></el-option>
							</el-select>
						</el-form-item>-->
						<!--<el-form-item label="赔款公司">
							<el-input v-model="auction.auctionName"></el-input>
						</el-form-item>-->
						<el-form-item label="完成时间">
							<el-input v-model="xq.entime"></el-input>
						</el-form-item>
						<!--<el-form-item label="上次进场">
							<el-input v-model="auction.auctionName"></el-input>
						</el-form-item>-->
						<el-form-item label="预估金额">
							<el-input v-model="xq.countprice"></el-input>
						</el-form-item>
						<el-form-item label="接待备注">
							<el-input v-model="xq.userremark"></el-input>
						</el-form-item>
						<el-form-item label="修复陈诉" prop="consumermark">
							<el-input type="textarea" v-model="xq.consumermark"></el-input>
						</el-form-item>
					</el-form>
				</div>
				<div>
					<template>
						<el-table ref="multipleTable" :data="xm" tooltip-effect="dark" style="width: 100%" height="250" @selection-change="handleSelectionChange">
							<el-table-column  label="项目编码" width="200">
									<template slot-scope="temp">
										{{temp.$index+1}}
									</template>
							</el-table-column>
							<el-table-column prop="infoname" label="项目名称" width="200">
							</el-table-column>
							<el-table-column prop="price" label="价类" width="200">
							</el-table-column>
							<el-table-column prop="infotime" label="耗时" width="200">
									<template slot-scope="temp">
										{{temp.row.infotime+'/h'}}
									</template>
							</el-table-column>
							<el-table-column prop="infomark" label="备注" width="200">
							</el-table-column>
							
						</el-table>
					</template>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/dialogs.js"></script>
	<script type="text/javascript" src="../js/index.js"></script>
	<script>
		var receiptsApp = new Vue({
			data: {
				xm: [{
					typeid: '',
					typename: '',
					typeparent: '',
					infoid: '',
					infoname: '',
					price: '',
					infomark: '',
					siid: ''
				}],
				smid: '',
				xq: {
					infoid: '',
					smid: '',
					carnumber: '',
					motorcyclename: '',
					brandname: '',
					motorid: '',
					motorname: '',
					staffname: '',
					username: '',
					drivername: '',
					driverphone: '',
					carcourse: '',
					starttime: '',
					entime: '',
					countprice: '',
					userremark: '',
					consumermark: ''
				},
				multipleSelection: []
			},
			methods: {
				goToXq() {
					let _this = this;
					_this.smid = window.sessionStorage.getItem('smid');
					console.info(_this.smid);
					$.getJSON(`http://127.0.0.1:8080/tyh/api/sc/tyhQueryByXq/${_this.smid}`, function(xq) {
						_this.xq = xq;
						_this.xm = xq.list;
					});
					
				},
				toggleSelection(rows) {
					if(rows) {
						rows.forEach(row => {
							this.$refs.multipleTable.toggleRowSelection(row);
						});
					} else {
						this.$refs.multipleTable.clearSelection();
					}
				},
				handleSelectionChange(val) {
					this.multipleSelection = val;
				}
			},
			mounted() {
				this.goToXq();
			}
		}).$mount('#receiptsApp');
	</script>

</html>