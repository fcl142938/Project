<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>添加技工</title>
		<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/index.css" />
		<script type="text/javascript" src="../js/jquery-1.12.4.js"></script>
		<script type="text/javascript" src="../js/jq_ajax_config.js"></script>
		<script type="text/javascript" src="../js/vue.js"></script>
	</head>

	<body>
		<div id="addbzApp">
			<el-form inline="true" :model="carlist" class="demo-form-inline" label-width="90px">
				<el-form-item label="技工姓名">
					<el-input v-model="carlist.aname"></el-input>
				</el-form-item>
				<el-form-item label="分组">
					<el-select size="small" v-model="carlist.gid" placeholder="请选择分租">
							<el-option v-for="(temp,i) in vehicleInfo" :label="temp.gname" :value="temp.gid"></el-option>
					</el-select>
				</el-form-item>
				<!--<el-form-item label="账号">
					<el-input v-model="carlist.aaccount"></el-input>
				</el-form-item>
				<el-form-item label="密码">
					<el-input v-model="carlist.apwd" type="passward"></el-input>
				</el-form-item>-->
				<el-form-item label="等级">
					<el-select size="small" v-model="carlist.agid" placeholder="请选择技工等級">
							<el-option v-for="(temp,i) in vehicleInfo1" :label="temp.agname" :value="temp.agid"></el-option>
					</el-select>
				</el-form-item>
				<el-form-item style="margin-left: 50px">
					<el-button type="primary" @click="onAdd()">保存</el-button>
				</el-form-item>
			</el-form>
		</div>
	</body>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../js/dialogs.js"></script>
	<script type="text/javascript" src="../js/index.js"></script>
	<script>
		var addbzApp = new Vue({
			data: {
				carlist: {
					aname: '',
					gid: '',
					aaccount: '',
					apwd: '',
					agid: '',
					positionid: '',
					endtime: '',
					startime: '',
					state: ''
				},
				vehicleInfo:[],
				vehicleInfo1:[]
			},
			methods: {
				onAdd() {
					let _this = this;
					jQuery.ajax("http://127.0.0.1:8080/lx/api/jg/addbanzu", {
						type: 'post',
						dataType: "json",
						data: JSON.stringify(_this.carlist),
						contentType: 'application/json; charset=UTF-8',
						success(data) {
							if(data == "ok") {
								alert("新增失败！");
							} else {
								alert("新增成功！");
								closeWindowDialog();
								_this.isShow2 = false;
								$(".is-active.is-closable").click();
							}
						}
					});
				},
			},
			mounted() {
				let _this = this;
				jQuery.getJSON(`http://127.0.0.1:8080/lx/api/bz/queryBanzuList`, function(pg) {
						_this.vehicleInfo = pg;
				})
				
				jQuery.getJSON(`http://127.0.0.1:8080/lx/api/xm1/queryStarAll`,function(pg) {
						_this.vehicleInfo1 = pg;
					//	_this.list = pg.list;	
				});
			}
		}).$mount('#addbzApp');
	</script>

</html>