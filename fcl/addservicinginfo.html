<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			.badge {
				padding: 0 5px 0 3px;
				margin-left: 10px;
			}
		</style>
	</head>

	<body>
		<div id="fclshowApp">
			<el-container>
				<el-aside width="200px" style="border: 1px gainsboro solid;border-radius: 5px;padding:0 10px;">
					<h5>类别分类</h5>
					<el-tree :data="data" :props="defaultProps" @node-click="handleNodeClick"></el-tree>
				</el-aside>
				<el-main>
					<el-table ref="multipleTable" :data="pageinfo.list" tooltip-effect="dark" style="width: 100%" @selection-change="handleSelectionChange">
						<el-table-column prop="infoid" label="维修编号" width="180" align="center">
						</el-table-column>
						<el-table-column prop="infoname" label="项目名称" align="center">
						</el-table-column>
						<el-table-column prop="price" label="项目价格" width="180" align="center">
						</el-table-column>
						<el-table-column prop="infomark" label="备注" align="center">
						</el-table-column>
						<el-table-column type="selection" width="55">
						</el-table-column>
					</el-table>
					<el-button type="success" size="mini" style="margin: 10px 5px 0 420px;">返回</el-button>
					<el-badge :value="multipleSelection.length" class="item">
						<el-button size="small" @click="addser">添加</el-button>
					</el-badge>
				</el-main>
			</el-container>
		</div>
		<script>
			var fclshowApp = new Vue({
				data: {
					data: [{
						label: '一级 1',
						children: [{
							label: '二级 1-1',
							children: [{
								label: '三级 1-1-1'
							}]
						}]
					}, {
						label: '一级 2',
						children: [{
							label: '二级 2-1',
							children: [{
								label: '三级 2-1-1'
							}]
						}, {
							label: '二级 2-2',
							children: [{
								label: '三级 2-2-1'
							}]
						}]
					}, {
						label: '一级 3',
						children: [{
							label: '二级 3-1',
							children: [{
								label: '三级 3-1-1'
							}]
						}, {
							label: '二级 3-2',
							children: [{
								label: '三级 3-2-1'
							}]
						}]
					}],
					defaultProps: {
						children: 'children',
						label: 'label'
					},
					pageinfo: {
						list: [{
								"infoid": 1,
								"infoname": 'sfsd',
								"price": 12,
								"infomark": '454'
							},
							{
								"infoid": 1,
								"infoname": 'sfsd',
								"price": 12,
								"infomark": '454'
							},
							{
								"infoid": 1,
								"infoname": 'sfsd',
								"price": 12,
								"infomark": '454'
							}
						]
					},
					multipleSelection: []
				},
				methods: {
					handleNodeClick(data) {
						console.log(data);
					},
					toggleSelection(rows) {
						if(rows) {
							rows.forEach(row => {
								this.$refs.multipleTable.toggleRowSelection(row);
							});
						} else {
							this.$refs.multipleTable.clearSelection();
						}
					},
					handleSelectionChange(val) {
						this.multipleSelection = val;
					},
					addser() {
						this.multipleSelection.forEach((obj, index) => {
							/*this.parent.tableData.push(obj)*/
							window.parent.app.tableData.push(obj);
						})

					}
				}
			}).$mount("#fclshowApp")
		</script>
	</body>

</html>